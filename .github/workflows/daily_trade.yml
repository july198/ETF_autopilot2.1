name: ETF Auto Trader

on:
  workflow_dispatch:  # 允许手动触发工作流
  schedule:
    - cron: "0 1 * * 2-6"  # 每周二到周六，UTC 01:00，转换为北京时间 09:00

jobs:
  run_daily:
    runs-on: ubuntu-latest  # 在 Ubuntu 环境中运行任务

    steps:
      # 步骤 1: 检出仓库代码
      - name: Checkout code
        uses: actions/checkout@v2

      # 步骤 2: 设置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.11'  # 配置 Python 版本为 3.11

      # 步骤 3: 安装依赖
      - name: Install dependencies
        run: |
          pip install -r requirements.txt  # 安装依赖

      # 步骤 4: 运行交易脚本
      - name: Run daily trader script
        run: |
          python ./scripts/run_daily.py  # 修改为相对路径
